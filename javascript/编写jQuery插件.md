## 编写jQuery 插件

> 参考来自《锋利的jQuery》的一书


### 1. 插件的种类

编写插件的目的： 对一系列方法和函数做一个封装，以便在其它地方重用


锋利的jQuery主要分为3种类型：

1. 封装对象方法的插件

将对象的方法进行封装，通过选择器获取的jQuery 对象，就可以使用该对象。

95%以上的插件都是封装对象方法的插件。有相当一部分的jQuery的方法，都是在jQuery脚本库内通过这种形式"插"在内核上的。如 `parent()`、`appendTo()`、`addClass()`等
不少DOM操作方法。

2. 封装全局函数的插件

可以将独立的函数加在jQuery命名空间下，如`jQuerynoConfict()` 、`jQuery.ajax()`、`jQuery.trim()`等，都是jQuery内部作为全局函数的插件附加到内核上去的。

3. 选择器插件

虽然jQuery的选择器十分强大，但还是会需要扩充一些自己喜欢的选择器，如color(red)来选择所有红色字的元素之类的想法。

### 插件的基本特点

* 命名推荐： jquery.[插件名].js,避免和其它js库插件混淆

* 所有的对象方法都应当 附加到jQuery.fn对象上，所有的全局函数都应附加到jQuery对象本身上。

* 在插件内部，this指向的是当前通过选择器获取的jQuery对象，而不像一般的方法那样。例如`click()`方法，内部的this指向的是DOM元素。

* 可以通过this.each来遍历所有元素。

* 所有的方法或者函数插件，都应当以分号结尾。否则压缩的时候可能出现问题，为了更稳妥些，甚至可以在插件头部先加上一个分号，以免他人的不规范代码给插件带来的影响

* 插件应该返回一个jQuery对象，以保证插件的可链式操作，除非插件需要返回的是一些需要获取的量，如字符串或者数组等。

* 避免在插件内部使用`$`作为jQuery对象的别名，而应使用完整的jQuery来表示。这样可以避免冲突。当然，也可以利用闭包这种技巧来回避这个问题，使插件内部继续使用`$`作为jQuery的别名。



### 插件中的闭包
































